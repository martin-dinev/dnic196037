<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CodeHelper SmartStrings</title>
    <!-- CSS only -->
    {% load static %}

    <script src="{% static 'cm/lib/codemirror.js' %}"></script>
    <link rel="stylesheet" href="{% static 'cm/lib/codemirror.css' %}">
    <script src="{% static 'cm/mode/javascript/javascript.js' %}"></script>

    {#    <script src="../../static/cm/lib/codemirror.js"></script>#}
    {#    <link rel="stylesheet" href="../../static/cm/lib/codemirror.css">#}
    {#    <script src="../../static/cm/mode/javascript/javascript.js"></script>#}

    <link href="{% static 'bootstrap-5.2.0-dist/css/bootstrap.css' %}" rel="stylesheet">
    {#    <link href="../../static/bootstrap-5.2.0-dist/css/bootstrap.css" rel="stylesheet">#}
    {#    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"#}
    {#          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">#}

    <script src="{% static 'bootstrap-5.2.0-dist/js/bootstrap.bundle.js' %}"></script>
    {#    <script src="../../static/bootstrap-5.2.0-dist/js/bootstrap.bundle.js"></script>#}
    {#    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"#}
    {#            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"#}
    {#            crossorigin="anonymous"></script>#}
    <style>
        .CodeMirror {
            padding-left: 0;
            padding-right: 0;
        }
    </style>
</head>
<body>
<section class="container-fluid bg-info min-vh-100 align-items-center d-flex px-0 flex-wrap">
    <div class="container-fluid align-items-center d-flex justify-content-around" style="height: 10vh">

        <div class="dropdown">
            <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                Language: C++
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item active" href="#">C++</a></li>
                <li><a class="dropdown-item disabled" href="#">Java</a></li>
                <li><a class="dropdown-item disabled" href="#">Kotlin</a></li>
                <li><a class="dropdown-item disabled" href="#">Python</a></li>
            </ul>
        </div>
        <button type="button"
                class="btn {% if not compiled %}btn-light{% elif compiled == -1 %}btn-warning{% elif compiled == 1 %}btn-success{% endif %}">
            Compile
        </button>

        <form id="submit_form" action="/" method="POST">
            {% csrf_token %}
            <input type="hidden" name="code" value=""/>

            {#            <button type="submit" class="btn {% if compiled == 1 %}btn-primary{% else %}btn-danger disabled{% endif %}">#}
            <button type="button" onclick="submit_form();"
                    class="btn {% if compiled == 1 %}btn-primary{% else %}btn-danger {% endif %}">
                Evaluate
            </button>
        </form>

    </div>
    <div class="container-fluid px-0" style="height: 90vh">
        <div class="h-100" id="text_area" name="text_area" style="margin-top: 0px;"></div>
    </div>

</section>

<script>
    var myCodeMirror = CodeMirror(document.getElementById('text_area'), {
        value:`{{ code|default:"#include<iostream>\nusing namespace std;\nint main() {\n\t\n}\n"|safe}}`,
        indentUnit: 4,
        lineNumbers: true,
        styleActiveLine: {nonEmpty: true},
        matchBrackets: true,
        mode: 'text/x-c++src',
        CodeMirror: {
            style: "padding-left: 0;padding-right:0;"
        }
    });

    function submit_form() {
        var my_form = document.forms['submit_form'];
        my_form.elements["code"].value = myCodeMirror.getValue();
        document.getElementById("submit_form").submit();
    }
</script>

</body>
</html>